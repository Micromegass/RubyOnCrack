
<div class="container">
 <div class="row">
  <div class="col-sm-10 col-sm-offset-1">

    <!-- showing questions-->
    <h1 class="heading"><%= @question.title%> </h1><br>
    <%= @question.description %>
    <!-- end showing questions-->

    <!-- showing comments on questions-->
     <h3>Comments </h3>
  <% @question.comments.each do |comment| %>
    <div class="well">
      <%=comment.body %>
    </div>
  <% end  %>
    <!-- end showing comments on questions-->


    <!--form for the Question comments-->
      <% if signed_in? %>
      <%= form_for @comment, url: comments_path do |f| %>
      <%= f.hidden_field :commentable_id, value: @question[:id] %>
      <%= f.hidden_field :commentable_type, value: "Question" %>
      <%= f.hidden_field :user_id, value: current_user[:id] if !current_user.nil? %>
      <%= f.text_area :body, rows: 3, placeholder: "Add a comment", class:"form-control" %> <br>
      <div class="text-right">
      <%= f.submit 'Comment', class: 'btn btn-success' %>
     </div>
     <% end %>
     <% end %>
    <!--end form for the Question comments-->


  

    <h2>Answers</h2>
     <!-- Here the answers are displayed-->
    <% @question.answers.each do |answer| %>
        <p class="well"><%= answer.body %> </p>
     <!-- end of displaying answers-->

    <!-- showing comments on answer-->
    <h3>Comments: </h3>
     <% answer.comments.each do |comment| %>
    <div class="well" >
      <%=comment.body %>
    </div>
     <% end  %>
    <!-- end showing comments on answer-->

    <!--form for the Answer comments-->
      <% if signed_in? && @question.answers.exists?%>
      <%= form_for @comment, url: comments_path do |f| %>
      <%= f.hidden_field :commentable_id, value: answer[:id] %>
      <%= f.hidden_field :commentable_type, value: "Answer" %>
      <%= f.hidden_field :user_id, value: current_user[:id] if !current_user.nil? %>
      <%= f.text_area :body, rows: 3, placeholder: "Add a comment", class:"form-control" %> <br>
      <div class="text-right">
      <%= f.submit 'Comment', class: 'btn btn-success' %>
     </div>
     <% end %>
     <% end %>
     <% end %>
    <!--end form for Answer comments-->


    <% if @question.answers.count == 0 %>
    <p>Nobody could solve this problem up until now. We need your help. If you can answer please help out. Otherwise call a friend who knows</p>
    <% end %>


    <% if signed_in? %>
    <h2>Participate and put your own Answer</h2>
    <!--This is the form for answers.-->
    <%= form_for @answer do |f| %>
    <%= f.hidden_field :question_id, value: @question[:id] %>
    <%= f.hidden_field :user_id, value: current_user[:id] if !current_user.nil? %>
    <div class="form-group">
    <%= f.text_area :body, rows: 5, class: "form-control" %>
    </div>
    <div class="text-right">
    <%= f.submit 'Submit Answer', class: 'btn btn-success' %>
   <% end %>
   <% end %> <!-- end for if -->
    <!--form for answers ends here-->

  </div> <!--end div col-->
 </div> <!--end div row-->
</div>  <!--end div container-->

<div class="icon">
   <%= link_to "#{fa_icon("chevron-circle-left")}".html_safe, root_path %>
</div>
